# CodeB Server í”„ë¡œì íŠ¸ ì¢…í•© ë¶„ì„ ë¦¬í¬íŠ¸

**ë¶„ì„ì¼**: 2025-12-09
**ë¶„ì„ ëŒ€ìƒ**: codeb-server í”„ë¡œì íŠ¸ ì „ì²´
**ë¶„ì„ì**: Claude Code

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ë¹„ì „ (plan.md ê¸°ë°˜)

**Leo Company Full-Stack AI Automation System**ì˜ í•µì‹¬ ëª©í‘œ:

| ëª©í‘œ | ì„¤ëª… | í˜„ì¬ ìƒíƒœ |
|------|------|----------|
| í”„ë¡œì íŠ¸ ì›í´ë¦­ ìƒì„± | DB/Redis ìë™ ìƒì„±, í¬íŠ¸ ìë™ í• ë‹¹ | âœ… MCP ë„êµ¬ êµ¬í˜„ ì™„ë£Œ |
| ì§€ì‹ì˜ ì½”ë“œí™” | ì•”ë¬µì§€ ì œê±°, í‘œì¤€í™”ëœ êµ¬ì¡° | ğŸŸ¡ ë¶€ë¶„ êµ¬í˜„ |
| AI ì¡°ì§ì  í†µí•© | Claude Code ê¸°ë°˜ ìë™í™” | âœ… Self-Healing CI/CD êµ¬í˜„ |
| ì¸í”„ë¼ íˆ¬ëª…í™” | ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ | ğŸŸ¡ MCP ë„êµ¬ë¡œ ì¡°íšŒ ê°€ëŠ¥ |
| í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡° | 10ê°œâ†’100ê°œ í”„ë¡œì íŠ¸ ë™ì¼ ë³µì¡ì„± | âœ… í¬íŠ¸/í”„ë¡œì íŠ¸ ë ˆì§€ìŠ¤íŠ¸ë¦¬ |

### 1.2 ì„¤ê³„ ì² í•™ (plan.md ê¸°ì¤€)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Hybrid Intelligence êµ¬ì¡°                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚     Brain     â”‚  â”‚    Muscle     â”‚  â”‚    Senses     â”‚        â”‚
â”‚  â”‚  (Claude Code)â”‚  â”‚  (Leo CLI)    â”‚  â”‚  (MCP ì—°ë™)   â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚ - ê¸°íš/ì„¤ê³„   â”‚  â”‚ - ì„œë²„ ì œì–´   â”‚  â”‚ - GitHub      â”‚        â”‚
â”‚  â”‚ - ì½”ë”©/í…ŒìŠ¤íŠ¸ â”‚  â”‚ - ë°°í¬ ì‹¤í–‰   â”‚  â”‚ - Slack       â”‚        â”‚
â”‚  â”‚ - ì½”ë“œ ë¦¬ë·°   â”‚  â”‚ - DB ìƒì„±     â”‚  â”‚ - ëª¨ë‹ˆí„°ë§    â”‚        â”‚
â”‚  â”‚ - ì—ëŸ¬ ìˆ˜ì •   â”‚  â”‚ - í¬íŠ¸ í• ë‹¹   â”‚  â”‚ - ì•Œë¦¼        â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ë¡œì»¬ í”„ë¡œì íŠ¸ ë¶„ì„

### 2.1 í”„ë¡œì íŠ¸ êµ¬ì¡°

```
codeb-server/
â”œâ”€â”€ .claude/                    # Claude Code ì„¤ì •
â”‚   â”œâ”€â”€ commands/               # ì»¤ìŠ¤í…€ ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ (12ê°œ)
â”‚   â”‚   â”œâ”€â”€ cb-analyze.md       # /cb-analyze ë¶„ì„ ëª…ë ¹
â”‚   â”‚   â”œâ”€â”€ cb-cleanup.md       # /cb-cleanup ì •ë¦¬ ëª…ë ¹
â”‚   â”‚   â”œâ”€â”€ cb-optimize.md      # /cb-optimize ìµœì í™” ëª…ë ¹
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ settings.local.json     # ë¡œì»¬ ì„¤ì •
â”‚
â”œâ”€â”€ .github/workflows/          # GitHub Actions
â”‚   â”œâ”€â”€ ci-cd.yml               # ê¸°ë³¸ CI/CD íŒŒì´í”„ë¼ì¸
â”‚   â”œâ”€â”€ self-healing-ci.yml     # Self-Healing (Copilot API)
â”‚   â””â”€â”€ claude-self-healing-ci.yml  # Self-Healing (Claude Code CLI) â­ NEW
â”‚
â”œâ”€â”€ codeb-deploy-system/        # MCP ì„œë²„ ì‹œìŠ¤í…œ â­
â”‚   â”œâ”€â”€ mcp-server/
â”‚   â”‚   â”œâ”€â”€ dist/               # ì»´íŒŒì¼ëœ JavaScript
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js        # MCP ì„œë²„ ì§„ì…ì 
â”‚   â”‚   â”‚   â”œâ”€â”€ tools/          # 45+ ë„êµ¬ë“¤
â”‚   â”‚   â”‚   â””â”€â”€ lib/            # ìœ í‹¸ë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”‚   â”œâ”€â”€ package.json        # @codeb/deploy-mcp
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â””â”€â”€ server-scripts/         # ì„œë²„ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸
â”‚
â”œâ”€â”€ docs/                       # ë¬¸ì„œ
â”‚   â”œâ”€â”€ codeb-deploy/           # MCP ë„êµ¬ ë¬¸ì„œ
â”‚   â”œâ”€â”€ CICD_ARCHITECTURE.md
â”‚   â””â”€â”€ DEVOPS_COMPLETE_GUIDE.md
â”‚
â”œâ”€â”€ infrastructure/             # ì¸í”„ë¼ ì„¤ì •
â”‚   â”œâ”€â”€ ansible/                # Ansible ì¸ë²¤í† ë¦¬
â”‚   â”œâ”€â”€ quadlet/                # Podman Quadlet ì„¤ì •
â”‚   â””â”€â”€ scripts/                # ë°±ì—…/ì„¤ì • ìŠ¤í¬ë¦½íŠ¸
â”‚
â”œâ”€â”€ scripts/                    # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ setup-self-hosted-runner.sh  # Runner ì„¤ì¹˜ â­ NEW
â”‚   â”œâ”€â”€ local-self-healing.sh
â”‚   â””â”€â”€ deployment-logger.sh
â”‚
â”œâ”€â”€ backup/                     # ë°±ì—… íŒŒì¼ë“¤
â”œâ”€â”€ .codeb-checkpoint/          # Wave ë¶„ì„ ë¦¬í¬íŠ¸
â”œâ”€â”€ .codeb-backup/              # ìë™ ë°±ì—…
â”‚
â”œâ”€â”€ .mcp.json                   # MCP ì„œë²„ ì„¤ì • â­
â”œâ”€â”€ package.json                # v3.6.0 (Wave 3 Production Ready)
â”œâ”€â”€ plan.md                     # ì „ëµ ê¸°íšì„œ (45K tokens)
â””â”€â”€ cicd.md                     # CI/CD êµ¬ì„± ë¬¸ì„œ
```

### 2.2 package.json ë¶„ì„

**ë²„ì „**: `codeb-unified-server v3.6.0` (Wave 3 Production Ready)

| ì¹´í…Œê³ ë¦¬ | ì˜ì¡´ì„± | ìš©ë„ |
|----------|--------|------|
| **ì›¹ í”„ë ˆì„ì›Œí¬** | express@4.18.2 | API ì„œë²„ |
| **ë³´ì•ˆ** | helmet@7.2.0, bcrypt@5.1.1 | ë³´ì•ˆ í—¤ë”, ì•”í˜¸í™” |
| **ì¸ì¦** | jsonwebtoken@9.0.2 | JWT í† í° |
| **ë°ì´í„°ë² ì´ìŠ¤** | pg@8.11.3 | PostgreSQL |
| **ìºì‹œ** | redis@4.6.10 | Redis í´ë¼ì´ì–¸íŠ¸ |
| **ë¡œê¹…** | winston@3.11.0, morgan@1.10.0 | êµ¬ì¡°í™”ëœ ë¡œê¹… |
| **ë¬¸ì„œí™”** | swagger-jsdoc, swagger-ui-express | API ë¬¸ì„œ |
| **í…ŒìŠ¤íŠ¸** | jest@29.7.0, @playwright/test@1.40.0 | í…ŒìŠ¤íŠ¸ |
| **ì½”ë“œ í’ˆì§ˆ** | eslint@8.52.0, prettier@3.0.3 | ë¦°íŠ¸/í¬ë§· |
| **TypeScript** | typescript@5.2.2 | íƒ€ì… ì²´í¬ |

### 2.3 MCP ì„œë²„ êµ¬ì„± (.mcp.json)

```json
{
  "mcpServers": {
    "codeb-deploy": {
      "command": "node",
      "args": ["codeb-deploy-system/mcp-server/dist/index.js"],
      "env": {
        "CODEB_SERVER_HOST": "141.164.60.51",
        "CODEB_SERVER_USER": "root",
        "CODEB_SSH_KEY_PATH": "/Users/admin/.ssh/id_rsa"
      }
    }
  }
}
```

---

## 3. MCP ë„êµ¬ ë¶„ì„ (45+ Tools)

### 3.1 ë„êµ¬ ì¹´í…Œê³ ë¦¬

| ì¹´í…Œê³ ë¦¬ | ë„êµ¬ ìˆ˜ | ì£¼ìš” ë„êµ¬ |
|----------|---------|----------|
| **ì„œë²„ ë¶„ì„** | 1 | `analyze_server` |
| **í”„ë¡œì íŠ¸ ê´€ë¦¬** | 6 | `init_project`, `list_projects`, `get_project`, `scan_existing_projects` |
| **ë°°í¬** | 4 | `deploy`, `deploy_compose_project`, `stop_compose_project`, `remove_compose_project` |
| **í—¬ìŠ¤ì²´í¬/ë¡¤ë°±** | 3 | `healthcheck`, `rollback`, `get_version_history` |
| **ë„ë©”ì¸** | 5 | `setup_domain`, `remove_domain`, `setup_project_domains`, `setup_preview_domain`, `check_domain_status` |
| **ì•Œë¦¼** | 1 | `notify` |
| **ë³´ì•ˆ** | 2 | `security_scan`, `generate_sbom` |
| **Preview** | 1 | `preview` |
| **ëª¨ë‹ˆí„°ë§** | 1 | `monitoring` |
| **í¬íŠ¸ ê´€ë¦¬** | 2 | `port_summary`, `sync_port_registry` |
| **Podman í—¬í¼** | 4 | `configure_pg_hba`, `get_container_ip`, `init_volume`, `ensure_network` |
| **GitHub Actions** | 4 | `generate_github_actions_workflow`, `get_workflow_errors`, `analyze_build_error`, `generate_error_report` |

### 3.2 í•µì‹¬ ë„êµ¬ ìƒì„¸

#### `deploy_compose_project` (í†µí•© ë°°í¬)
```typescript
// App + PostgreSQL + Redis ì¼ê´„ ë°°í¬
{
  projectName: string;
  environment: 'staging' | 'production' | 'preview';
  app: { image, port, env, healthcheck };
  postgres: { enabled, version, port, username, password, database };
  redis: { enabled, version, port, password };
  network: { name, subnet };
}
```

**ìë™ ì²˜ë¦¬ ì‚¬í•­**:
- pg_hba.conf ìë™ ì„¤ì • (ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ í—ˆìš©)
- ì»¨í…Œì´ë„ˆ IP ìë™ ë°œê²¬ (Podman 3.x DNS ë¬¸ì œ í•´ê²°)
- DATABASE_URL ìë™ ì£¼ì…

#### `analyze_build_error` (Self-Healing)
```typescript
// GitHub Actions ë¹Œë“œ ì—ëŸ¬ ë¶„ì„
{
  error: {
    errorType: string;
    errorMessage: string;
    errorDetails: string[];
    file: string;
    line: number;
  };
  projectPath?: string;  // ë¡œì»¬ í”„ë¡œì íŠ¸ ê²½ë¡œ
}
// ìˆ˜ì • ì œì•ˆê³¼ í•¨ê»˜ ë°˜í™˜
```

---

## 4. CI/CD íŒŒì´í”„ë¼ì¸ ë¶„ì„

### 4.1 ì›Œí¬í”Œë¡œìš° ë¹„êµ

| ì›Œí¬í”Œë¡œìš° | AI ì—”ì§„ | Runner | íŠ¹ì§• |
|------------|---------|--------|------|
| `ci-cd.yml` | ì—†ìŒ | ubuntu-latest | ê¸°ë³¸ CI/CD |
| `self-healing-ci.yml` | GitHub Copilot API | ubuntu-latest | AI ìë™ ìˆ˜ì • |
| `claude-self-healing-ci.yml` | **Claude Code CLI** | **self-hosted** | **ë¬´ì œí•œ í† í°** â­ |

### 4.2 Claude Self-Healing CI/CD ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Claude Self-Healing CI/CD Pipeline                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚   GitHub Push    â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚           â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚ Job 1: Build     â”‚  ubuntu-latest                                â”‚
â”‚  â”‚ - typecheck      â”‚  - ë¹Œë“œ ì—ëŸ¬ ê°ì§€                              â”‚
â”‚  â”‚ - lint           â”‚  - ì—ëŸ¬ ë¡œê·¸ ìº¡ì²˜                              â”‚
â”‚  â”‚ - build          â”‚  - Base64 ì¸ì½”ë”© ì „ë‹¬                          â”‚
â”‚  â”‚ - test           â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚           â”‚ build_failed=true                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ Job 2: Claude Code Auto-Fix                      â”‚               â”‚
â”‚  â”‚ [self-hosted, codeb, claude-code]                â”‚               â”‚
â”‚  â”‚                                                   â”‚               â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚               â”‚
â”‚  â”‚  â”‚ Loop (max 5 attempts):                      â”‚ â”‚               â”‚
â”‚  â”‚  â”‚                                             â”‚ â”‚               â”‚
â”‚  â”‚  â”‚  1. Claude CLI ìˆ˜ì • ìš”ì²­                     â”‚ â”‚               â”‚
â”‚  â”‚  â”‚     - No-Deletion Principle í”„ë¡¬í”„íŠ¸         â”‚ â”‚               â”‚
â”‚  â”‚  â”‚     - í—ˆìš© ë„êµ¬: Read,Edit,Write,Glob,Grep  â”‚ â”‚               â”‚
â”‚  â”‚  â”‚                                             â”‚ â”‚               â”‚
â”‚  â”‚  â”‚  2. ìˆ˜ì • ê²€ì¦                                â”‚ â”‚               â”‚
â”‚  â”‚  â”‚     - Additions > Deletions í™•ì¸            â”‚ â”‚               â”‚
â”‚  â”‚  â”‚     - ê¸ˆì§€ íŒ¨í„´ ê²€ì‚¬ (@ts-ignore ë“±)        â”‚ â”‚               â”‚
â”‚  â”‚  â”‚                                             â”‚ â”‚               â”‚
â”‚  â”‚  â”‚  3. ì¬ë¹Œë“œ í…ŒìŠ¤íŠ¸                            â”‚ â”‚               â”‚
â”‚  â”‚  â”‚     - typecheck â†’ lint â†’ build â†’ test      â”‚ â”‚               â”‚
â”‚  â”‚  â”‚                                             â”‚ â”‚               â”‚
â”‚  â”‚  â”‚  4. ì„±ê³µ ì‹œ ì»¤ë°‹ & í‘¸ì‹œ                      â”‚ â”‚               â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚           â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚ Job 3: Docker    â”‚  ubuntu-latest                                â”‚
â”‚  â”‚ - Build image    â”‚  - GHCR í‘¸ì‹œ                                   â”‚
â”‚  â”‚ - Push to GHCR   â”‚  - ë©€í‹° í”Œë«í¼                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚           â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚ Job 4: Deploy    â”‚  [self-hosted, codeb]                         â”‚
â”‚  â”‚ - Pull image     â”‚  - Podman ë°°í¬                                 â”‚
â”‚  â”‚ - Health check   â”‚  - ë¬´ì¤‘ë‹¨ ë°°í¬                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 No-Deletion Principle

**ê¸ˆì§€ íŒ¨í„´**:
```typescript
const FORBIDDEN_PATTERNS = [
  '@ts-ignore',           // TypeScript ì—ëŸ¬ ë¬´ì‹œ
  '@ts-nocheck',          // TypeScript ì²´í¬ ë¹„í™œì„±í™”
  '@ts-expect-error',     // ì˜ˆìƒ ì—ëŸ¬ ë¬´ì‹œ
  'eslint-disable',       // ESLint ê·œì¹™ ë¬´ì‹œ
  'eslint-disable-next-line',
  '.skip(',               // í…ŒìŠ¤íŠ¸ ìŠ¤í‚µ
  '.only(',               // íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
  'as any',               // any íƒ€ì… ìºìŠ¤íŒ…
  ': any',                // any íƒ€ì… ì„ ì–¸
  '|| true',              // ì—ëŸ¬ ë¬´ì‹œ
  '|| exit 0',            // ì¢…ë£Œ ì½”ë“œ ìš°íšŒ
];
```

**ê²€ì¦ ë¡œì§**:
```bash
# ì‚­ì œê°€ ì¶”ê°€ë³´ë‹¤ ë§ìœ¼ë©´ ê±°ë¶€
DELETIONS=$(git diff --numstat | awk '{ sum += $2 } END { print sum+0 }')
ADDITIONS=$(git diff --numstat | awk '{ sum += $1 } END { print sum+0 }')

if [ "$DELETIONS" -gt "$ADDITIONS" ]; then
  echo "Fix rejected: More deletions than additions"
  exit 1
fi
```

---

## 5. ì„œë²„ í™˜ê²½ ë¶„ì„

### 5.1 ì„œë²„ ì •ë³´

| í•­ëª© | ê°’ |
|------|-----|
| **IP** | 141.164.60.51 |
| **ì‚¬ìš©ì** | root |
| **ì¸ì¦** | SSH í‚¤ (/Users/admin/.ssh/id_rsa) |
| **í˜„ì¬ ìƒíƒœ** | âš ï¸ ì—°ê²° ë¶ˆê°€ (í¬íŠ¸ 22 ê±°ë¶€) |

### 5.2 ì˜ˆìƒ êµ¬ì„± (plan.md ê¸°ì¤€)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Production Server (141.164.60.51)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚   Caddy          â”‚  â”‚   Podman         â”‚                     â”‚
â”‚  â”‚   (Reverse Proxy)â”‚  â”‚   (Containers)   â”‚                     â”‚
â”‚  â”‚   - Auto SSL     â”‚  â”‚   - App          â”‚                     â”‚
â”‚  â”‚   - Load Balance â”‚  â”‚   - PostgreSQL   â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   - Redis        â”‚                     â”‚
â”‚           â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚           â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚   Claude Code    â”‚  â”‚   GitHub Runner  â”‚                     â”‚
â”‚  â”‚   CLI v1.0.35    â”‚  â”‚   (Self-Hosted)  â”‚                     â”‚
â”‚  â”‚   - Max Plan âœ…   â”‚  â”‚   - Labels:      â”‚                     â”‚
â”‚  â”‚   - 20x Rate     â”‚  â”‚     codeb        â”‚                     â”‚
â”‚  â”‚   - Credentials  â”‚  â”‚     claude-code  â”‚                     â”‚
â”‚  â”‚     ë³µì‚¬ ì™„ë£Œ     â”‚  â”‚     self-hosted  â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 í¬íŠ¸ í• ë‹¹ ì „ëµ

| ë²”ìœ„ | ìš©ë„ | ì˜ˆì‹œ |
|------|------|------|
| 3000-3999 | App í¬íŠ¸ | 3000: í”„ë¡œì íŠ¸ A, 3001: í”„ë¡œì íŠ¸ B |
| 5400-5499 | PostgreSQL í¬íŠ¸ | 5400: í”„ë¡œì íŠ¸ A DB |
| 6379+ | Redis í¬íŠ¸ | ê¸°ë³¸ 6379, ì¶”ê°€ ì¸ìŠ¤í„´ìŠ¤ |
| 0-15 | Redis DB Index | ê° í”„ë¡œì íŠ¸ë³„ í• ë‹¹ |

---

## 6. ì™„ë£Œëœ ì‘ì—…

### 6.1 ì´ì „ ì„¸ì…˜ì—ì„œ ì™„ë£Œ

| ë‹¨ê³„ | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| Claude Code CLI ì„¤ì¹˜ | âœ… | ì„œë²„ì— v1.0.35 ì„¤ì¹˜ë¨ |
| OAuth ìê²©ì¦ëª… ë³µì‚¬ | âœ… | Max Plan ($200/ì›”) í† í° ë³µì‚¬ |
| Self-Hosted Runner ìŠ¤í¬ë¦½íŠ¸ | âœ… | `scripts/setup-self-hosted-runner.sh` ìƒì„± |
| Claude Self-Healing ì›Œí¬í”Œë¡œìš° | âœ… | `.github/workflows/claude-self-healing-ci.yml` ìƒì„± |

### 6.2 ìƒì„±ëœ íŒŒì¼

1. **[scripts/setup-self-hosted-runner.sh](../scripts/setup-self-hosted-runner.sh)**
   - Runner ì„¤ì¹˜ ìë™í™”
   - Claude ìê²©ì¦ëª… ìë™ ë³µì‚¬
   - systemd ì„œë¹„ìŠ¤ ë“±ë¡

2. **[.github/workflows/claude-self-healing-ci.yml](../.github/workflows/claude-self-healing-ci.yml)**
   - Claude Code CLI ê¸°ë°˜ ìë™ ìˆ˜ì •
   - No-Deletion Principle ì ìš©
   - ìµœëŒ€ 5íšŒ ìˆ˜ì • ì‹œë„

---

## 7. plan.mdì™€ í˜„ì¬ êµ¬í˜„ ê°­ ë¶„ì„

### 7.1 ì¼ì¹˜í•˜ëŠ” ë¶€ë¶„ âœ…

| plan.md ëª©í‘œ | í˜„ì¬ êµ¬í˜„ |
|--------------|----------|
| í”„ë¡œì íŠ¸ ì›í´ë¦­ ìƒì„± | `init_project`, `deploy_compose_project` MCP ë„êµ¬ |
| í¬íŠ¸ ìë™ í• ë‹¹ | `port_registry`, `sync_port_registry` |
| DB ìë™ ìƒì„± | `deploy_compose_project` (PostgreSQL + Redis) |
| Self-Healing CI/CD | `claude-self-healing-ci.yml` ì›Œí¬í”Œë¡œìš° |
| No-Deletion Principle | FORBIDDEN_PATTERNS ê²€ì¦ |
| ë„ë©”ì¸ ìë™ ì„¤ì • | `setup_domain`, `setup_project_domains` |
| ë¡¤ë°± ì§€ì› | `rollback`, `get_version_history` |
| ëª¨ë‹ˆí„°ë§ | `monitoring`, `healthcheck` |

### 7.2 ê°­ (ê°œì„  í•„ìš”) ğŸŸ¡

| plan.md ëª©í‘œ | í˜„ì¬ ìƒíƒœ | ê°œì„  ë°©ì•ˆ |
|--------------|----------|----------|
| 8ê°œ Claude ì—ì´ì „íŠ¸ êµ¬ì¡° | MCP ë„êµ¬ë§Œ ì¡´ì¬ | ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ êµ¬ì¶• |
| Skills ì‹œìŠ¤í…œ | ë¯¸êµ¬í˜„ | `.claude/skills/` í´ë” ìƒì„± |
| Core CMS í…œí”Œë¦¿ | ë¯¸êµ¬í˜„ | í‘œì¤€ í”„ë¡œì íŠ¸ í…œí”Œë¦¿ ìƒì„± |
| í”„ë¡œì íŠ¸ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ (YAML) | ë¯¸êµ¬í˜„ | í”„ë¡œì íŠ¸ë³„ manifest.yaml |
| Leo-Manager CLI | MCPë¡œ ëŒ€ì²´ | í†µí•© CLI ë„êµ¬ ê°œë°œ |
| ì˜¤í† ìŠ¤ì¼€ì¼ë§ | ë¯¸êµ¬í˜„ | Vultr API ì—°ë™ |
| Prometheus + Grafana | ë¯¸êµ¬í˜„ | ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ ë°°í¬ |
| Slack/PagerDuty ì—°ë™ | notify ë„êµ¬ë§Œ ì¡´ì¬ | ì‹¤ì œ ì—°ë™ êµ¬í˜„ |

### 7.3 ëˆ„ë½ëœ ë¶€ë¶„ âŒ

| í•­ëª© | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|------|------|----------|
| CLAUDE.md í‘œì¤€ í…œí”Œë¦¿ | í”„ë¡œì íŠ¸ë³„ ì»¨í…ìŠ¤íŠ¸ | ë†’ìŒ |
| .env í…œí”Œë¦¿ ìë™ ìƒì„± | í™˜ê²½ë³€ìˆ˜ í‘œì¤€í™” | ë†’ìŒ |
| ë°±ì—… ìë™í™” | ì¼ì¼ DB ë°±ì—… | ì¤‘ê°„ |
| ë¹„ìš© ìµœì í™” ì „ëµ | Opus/Sonnet/Haiku ë¶„ë°° | ë‚®ìŒ |
| í…ŒìŠ¤íŠ¸ ë°ì´í„° ì‹œë”© | ì´ˆê¸° ë°ì´í„° ìë™ ìƒì„± | ë‚®ìŒ |

---

## 8. ê°œì„  ì œì•ˆ

### 8.1 ì¦‰ì‹œ í•„ìš”í•œ ì‘ì—… (P0)

1. **ì„œë²„ ì—°ê²° ë³µêµ¬**
   - SSH í¬íŠ¸ 22 ì ‘ê·¼ í™•ì¸
   - ë°©í™”ë²½ ì„¤ì • ì ê²€
   - VPN ë˜ëŠ” ëŒ€ì²´ ì ‘ê·¼ ë°©ë²• í™•ì¸

2. **GitHub ì €ì¥ì†Œ ìƒì„± ë° ì—°ê²°**
   ```bash
   gh repo create codeb-server --private --source=. --push
   ```

3. **Self-Hosted Runner ì„¤ì¹˜**
   ```bash
   # ì„œë²„ì—ì„œ ì‹¤í–‰
   bash /path/to/setup-self-hosted-runner.sh <ORG> <REPO> <TOKEN>
   ```

### 8.2 ë‹¨ê¸° ê°œì„  (P1)

1. **CLAUDE.md í…œí”Œë¦¿ ìƒì„±**
   ```markdown
   # Project: ${PROJECT_NAME}
   ## Overview
   ## Tech Stack
   ## Key Commands
   ## Code Conventions
   ## Dos and Don'ts
   ```

2. **Skills ì‹œìŠ¤í…œ êµ¬ì¶•**
   ```
   .claude/skills/
   â”œâ”€â”€ core-cms.md          # CMS í‘œì¤€ êµ¬ì¡°
   â”œâ”€â”€ leo-infra.md         # ì¸í”„ë¼ ì„¤ì •
   â”œâ”€â”€ testing.md           # í…ŒìŠ¤íŠ¸ íŒ¨í„´
   â””â”€â”€ security.md          # ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸
   ```

3. **í”„ë¡œì íŠ¸ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ìŠ¤í‚¤ë§ˆ**
   ```yaml
   project:
     name: my-project
     type: nextjs
   environment:
     domains: [staging.codeb.dev, app.codeb.dev]
   resources:
     app_port: 3005
     db_port: 5405
     redis_db: 5
   ```

### 8.3 ì¤‘ê¸° ê°œì„  (P2)

1. **í†µí•© CLI ë„êµ¬** (Leo CLI)
   ```bash
   leo project create <name>   # í”„ë¡œì íŠ¸ ìƒì„±
   leo project deploy <name>   # ë°°í¬
   leo project status          # ìƒíƒœ í™•ì¸
   leo db create <name>        # DB ìƒì„±
   leo db backup <name>        # DB ë°±ì—…
   ```

2. **ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ ë°°í¬**
   - Prometheus (ë©”íŠ¸ë¦­ ìˆ˜ì§‘)
   - Grafana (ëŒ€ì‹œë³´ë“œ)
   - Alertmanager (ì•Œë¦¼)

3. **ì˜¤í† ìŠ¤ì¼€ì¼ë§ êµ¬í˜„**
   - Vultr API ì—°ë™
   - CPU ê¸°ë°˜ ìë™ ìŠ¤ì¼€ì¼ë§
   - ë¹„ìš© ìµœì í™”

---

## 9. ê²°ë¡ 

### 9.1 í˜„ì¬ ìƒíƒœ í‰ê°€

| ì˜ì—­ | ì™„ì„±ë„ | ë¹„ê³  |
|------|--------|------|
| MCP ë„êµ¬ | 90% | 45+ ë„êµ¬ êµ¬í˜„ ì™„ë£Œ |
| CI/CD íŒŒì´í”„ë¼ì¸ | 85% | Self-Healing ì›Œí¬í”Œë¡œìš° ì™„ì„± |
| Self-Hosted Runner | 70% | ìŠ¤í¬ë¦½íŠ¸ ìƒì„±, ì„¤ì¹˜ í•„ìš” |
| ëª¨ë‹ˆí„°ë§ | 50% | ê¸°ë³¸ ë„êµ¬ë§Œ ì¡´ì¬ |
| ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ | 20% | plan.md ëŒ€ë¹„ ë¯¸í¡ |
| ë¬¸ì„œí™” | 70% | ì¶”ê°€ ë¬¸ì„œ í•„ìš” |

### 9.2 ë‹¤ìŒ ë‹¨ê³„ ê¶Œì¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ê¶Œì¥ ì‹¤í–‰ ìˆœì„œ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Phase 1: ì¸í”„ë¼ ê¸°ë°˜ (1-2ì¼)                                    â”‚
â”‚  â”œâ”€ ì„œë²„ SSH ì—°ê²° ë³µêµ¬                                           â”‚
â”‚  â”œâ”€ GitHub ì €ì¥ì†Œ ìƒì„±                                           â”‚
â”‚  â””â”€ Self-Hosted Runner ì„¤ì¹˜                                      â”‚
â”‚                                                                  â”‚
â”‚  Phase 2: CI/CD í™œì„±í™” (1ì¼)                                     â”‚
â”‚  â”œâ”€ ì²« ë²ˆì§¸ ë°°í¬ í…ŒìŠ¤íŠ¸                                          â”‚
â”‚  â”œâ”€ Self-Healing ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸                               â”‚
â”‚  â””â”€ ë°°í¬ íŒŒì´í”„ë¼ì¸ ê²€ì¦                                         â”‚
â”‚                                                                  â”‚
â”‚  Phase 3: í‘œì¤€í™” (2-3ì¼)                                         â”‚
â”‚  â”œâ”€ CLAUDE.md í…œí”Œë¦¿ ìƒì„±                                        â”‚
â”‚  â”œâ”€ Skills ì‹œìŠ¤í…œ êµ¬ì¶•                                           â”‚
â”‚  â””â”€ í”„ë¡œì íŠ¸ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ìŠ¤í‚¤ë§ˆ ì •ì˜                              â”‚
â”‚                                                                  â”‚
â”‚  Phase 4: í™•ì¥ (1ì£¼)                                             â”‚
â”‚  â”œâ”€ ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ ë°°í¬                                           â”‚
â”‚  â”œâ”€ Leo CLI í†µí•© ë„êµ¬ ê°œë°œ                                       â”‚
â”‚  â””â”€ ì˜¤í† ìŠ¤ì¼€ì¼ë§ êµ¬í˜„                                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**ë¬¸ì„œ ì‘ì„±**: Claude Code
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-09
